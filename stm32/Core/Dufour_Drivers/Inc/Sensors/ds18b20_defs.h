/**
 * @file    ds18b20_defs.h
 * @brief   Definitions & macros used internally for the DS18B20 driver.
 * 
 * @copyright Copyright (c) 2022 Dufour Aerospace
 */

#pragma once

#include "main.h"

/* Command macros ----------------------------------------------------------- */

/* DS18B20 scratchpad memory commands */
#define DS18B20_CMD_RSCRATCHPAD			0xBE
#define DS18B20_CMD_WSCRATCHPAD			0x4E
#define DS18B20_CMD_CPYSCRATCHPAD		0x48

/* DS18B20 ROM commands and power supply reading command */
#define DS18B20_CMD_RECEEPROM			0xB8
#define DS18B20_CMD_RPWRSUPPLY		    0xB4
#define DS18B20_CMD_SEARCHROM			0xF0
#define DS18B20_CMD_READROM				0x33
#define DS18B20_CMD_MATCHROM			0x55
#define DS18B20_CMD_SKIPROM				0xCC
#define DS18B20_FAMILY_CODE				0x28
#define DS18B20_CMD_ALARMSEARCH		    0xEC

/* DS18B20 read temperature command */
#define DS18B20_CMD_CONVERTTEMP		0x44 	/* Convert temperature */

/** All ROM addresses of the ds18b20 sensors currently in the company's possession.
 * (i.e. to be placed on the bus.)
 */
static const uint8_t ds18b20_rom_table[19][8] =
{
{ 0x28, 0xA8, 0xA0, 0x25, 0x0E, 0x00, 0x00, 0xD5 },
{ 0x28, 0xDC, 0x27, 0x25, 0x0E, 0x00, 0x00, 0x0B },
{ 0x28, 0x79, 0x62, 0xC5, 0x0D, 0x00, 0x00, 0x2A },
{ 0x28, 0xCD, 0x48, 0x25, 0x0E, 0x00, 0x00, 0x19 },
{ 0x28, 0x02, 0xA9, 0x25, 0x0E, 0x00, 0x00, 0xB5 },
{ 0x28, 0x36, 0x3E, 0x25, 0x0E, 0x00, 0x00, 0x62 },
{ 0x28, 0x89, 0x6A, 0x25, 0x0E, 0x00, 0x00, 0xCB },
{ 0x28, 0xD1, 0xA5, 0x24, 0x0E, 0x00, 0x00, 0x86 },
{ 0x28, 0x63, 0x9C, 0x25, 0x0E, 0x00, 0x00, 0x17 },
{ 0x28, 0x5F, 0x8D, 0x25, 0x0E, 0x00, 0x00, 0x36 },
{ 0x28, 0xC0, 0x29, 0xC7, 0x0D, 0x00, 0x00, 0x25 },
{ 0x28, 0xAC, 0x96, 0x25, 0x0E, 0x00, 0x00, 0x11 },
{ 0x28, 0xD5, 0x4A, 0x25, 0x0E, 0x00, 0x00, 0x60 },
{ 0x28, 0xF2, 0x50, 0x24, 0x0E, 0x00, 0x00, 0x1D },
{ 0x28, 0x46, 0x96, 0x25, 0x0E, 0x00, 0x00, 0xF7 },
{ 0x28, 0xDF, 0x1D, 0x25, 0x0E, 0x00, 0x00, 0x6B },
{ 0x28, 0xA8, 0xBA, 0x24, 0x0E, 0x00, 0x00, 0x9B },
{ 0x28, 0xBC, 0x44, 0x24, 0x0E, 0x00, 0x00, 0x18 },
{ 0x28, 0x6F, 0x40, 0x25, 0x0E, 0x00, 0x00, 0x15 }, };

